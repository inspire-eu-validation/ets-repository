<?xml version="1.0" encoding="utf-8"?>
<ExecutableTestSuite xmlns="http://www.interactive-instruments.de/etf/2.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="EID09820daf-62b2-4fa3-a95f-56a0d2b7c4d8" xsi:schemaLocation="http://www.interactive-instruments.de/etf/2.0 https://resources.etf-validator.net/schema/v2/val/ignoreRef.xsd">
	<itemHash>bQ==</itemHash>
	<remoteResource>https://github.com/inspire-eu-validation/ets-repository/tree/master/data/schemas</remoteResource>
	<localPath>/auto</localPath>
	<label>Conformance class: INSPIRE GML application schemas, General requirements</label>
	<description><![CDATA[This test suite examines GML documents against basic requirements for the GML encoding for spatial data sets in INSPIRE. This only covers application-schema-independent, generic requirements. Requirements related to specific application schemas are part of conformance classes with a dependency on this conformance class.<br/><br/>
<b>This is a draft version. It has limitations and is expected to contain errors.</b> Please report any issues or problems <a href="https://github.com/INSPIRE-MIF/helpdesk-validator/wiki/Your-feedback" target="_blank">in GitHub</a>.<br/><br/>
Known limitations are documented in the description of the applicable test case or test assertion. There is a general limitation in all assertions that extensions in additional application schemas are only supported, if the unqualified name of the feature type in the extension is the same as the name of the feature type in the INSPIRE application schema.<br/><br/>
Source: <a href="http://inspire.ec.europa.eu/id/ats/data/master/schemas" target="_blank">Conformance Class 'INSPIRE GML application schemas'</a><br/><br/>
Pre-requisite conformance classes:
<ul><li><a href="http://inspire.ec.europa.eu/id/ats/data-encoding/master/inspire-gml" target="_blank">Conformance Class 'INSPIRE GML encoding'</a></li></ul>]]></description>
	<reference>../../inspire-bsxets.xq</reference>
	<version>0.2.6</version>
	<author>interactive instruments GmbH</author>
	<creationDate>2016-08-15T00:00:00Z</creationDate>
	<lastEditor>Consortium Bilbomatica, Guadaltel y Geograma</lastEditor>
	<lastUpdateDate>2020-02-21T12:20:00Z</lastUpdateDate>
	<tags>
		<tag ref="EIDaeed5629-2c33-4fa6-aa66-f59418abaa70"/>
	</tags>
	<testDriver ref="EID4dddc9e2-1b21-40b7-af70-6a2d156ad130"/>
	<translationTemplateBundle ref="EID70a263c0-0ad7-42f2-9d4d-0d8a4ca71b52"/>
	<ParameterList name="ETF Standard Parameters for XML test objects">
		<parameter name="files_to_test" required="true">
			<defaultValue>.*</defaultValue>
			<description ref="TR.filesToTest"/>
			<allowedValues>.*</allowedValues>
			<type>string</type>
		</parameter>
		<parameter name="tests_to_execute" required="false">
			<defaultValue>.*</defaultValue>
			<description ref="TR.testsToExecute"/>
			<allowedValues>.*</allowedValues>
			<type>string</type>
		</parameter>
	</ParameterList>
	<supportedTestObjectTypes>
		<testObjectType ref="EIDe1d4a306-7a78-4a3b-ae2d-cf5f0810853e"/>
	</supportedTestObjectTypes>
	<dependencies>
		<executableTestSuite ref="EID545f9e49-009b-4114-9333-7ca26413b5d4"/>
	</dependencies>
	<testModules>
		<TestModule id="EID073b8871-8ce0-4ba8-9b53-f1aec2019d3b">
			<label>IGNORE</label>
			<description>IGNORE</description>
			<parent ref="EID09820daf-62b2-4fa3-a95f-56a0d2b7c4d8"/>
			<testCases>
				<TestCase id="EID071a80e9-332e-4219-b600-329f47b98ef1">
					<label>Schema</label>
					<description>Verify whether each relevant element of the dataset under inspection carries a name specified in the target application schema.</description>
					<parent ref="EID073b8871-8ce0-4ba8-9b53-f1aec2019d3b"/>
					<testSteps>
						<TestStep id="EID871889b6-5664-4498-8762-849fb77a084f">
							<label>IGNORE</label>
							<description>IGNORE</description>
							<parent ref="EID071a80e9-332e-4219-b600-329f47b98ef1"/>
							<statementForExecution>not applicable</statementForExecution>
							<testItemType ref="EIDf483e8e8-06b9-4900-ab36-adad0d7f22f0"/>
							<testAssertions>
								<TestAssertion id="EID09ad14e3-d46f-42fc-9b01-64cb6ed2134c">
									<label>gmlas.a.1: Mapping of source data to INSPIRE</label>
									<description><![CDATA[Verify whether each relevant element of the source data set under inspection has been properly mapped to the INSPIRE application schemas. Inspect the documentation of the source data set and determine, if all relevant information has been mapped correctly to the INSPIRE application schema, i.e. that spatial object types, data types, attributes, association roles, code lists, and enumerations are mapped to the INSPIRE application schemas with the correct designation of mnemonic names.<br/><br/>
Relevant requirements:
<ul><li>Article 4(1) - For the exchange and classification of spatial objects from data sets meeting the conditions laid down in Article 4 of Directive 2007/2/EC, Member States shall use the spatial object types and associated data types, enumerations and code lists that are defined in Annexes II, III and IV for the themes the data sets relate to.</li></ul>
Source: <a href="http://inspire.ec.europa.eu/id/ats/data/master/schemas/schema" target="_blank">Abstract Test Case 'Schema'</a>, <a href="http://inspire.jrc.ec.europa.eu/documents/Data_Specifications/INSPIRE_DataSpecification_Template_v3.0rc3.pdf">INSPIRE Data Specification Template, A.1.1</a>]]></description>
									<parent ref="EID871889b6-5664-4498-8762-849fb77a084f"/>
									<expectedResult>NOT_APPLICABLE</expectedResult>
									<expression>NOT_APPLICABLE</expression>
									<testItemType ref="EIDb48eeaa3-6a74-414a-879c-1dc708017e11"/>
								</TestAssertion>
								<TestAssertion id="EIDa24f1604-1e86-43d7-b1b0-47ede44b4f9c">
									<label>gmlas.a.2: Modelling of additional spatial object types</label>
									<description><![CDATA[Inspect the XML Schema namespace of each feature element. If a namespace URI does not start with "http://inspire.ec.europa.eu/schemas/" or "urn:x-inspire:specification:gmlas:" it is not one of the approved INSPIRE application schema namespaces. Review the extension documentation for the identified namespaces to check that any extensions do not overlap with the spatial object types and associated data types and enumerations that are defined in Annexes II, III and IV of the Implementing Rule.<br/><br/>
Relevant requirements:
<ul><li>Article 4(1) - For the exchange and classification of spatial objects from data sets meeting the conditions laid down in Article 4 of Directive 2007/2/EC, Member States shall use the spatial object types and associated data types, enumerations and code lists that are defined in Annexes II, III and IV for the themes the data sets relate to.</li></ul>
Source: <a href="http://inspire.ec.europa.eu/id/ats/data/master/schemas" target="_blank">Abstract Test Case 'Schema'</a>, <a href="http://inspire.jrc.ec.europa.eu/documents/Data_Specifications/INSPIRE_DataSpecification_Template_v3.0rc3.pdf">INSPIRE Data Specification Template, A.1.1</a>]]></description>
									<parent ref="EID871889b6-5664-4498-8762-849fb77a084f"/>
									<expectedResult>NOT_APPLICABLE</expectedResult>
									<expression>NOT_APPLICABLE</expression>
									<testItemType ref="EIDb48eeaa3-6a74-414a-879c-1dc708017e11"/>
								</TestAssertion>
							</testAssertions>
						</TestStep>
					</testSteps>
				</TestCase>
				<TestCase id="EID2c6fe882-7c53-47f2-b4c4-66b15c248be4">
					<label>Schema validation</label>
					<description>Verify that all XML documents validate against their XML schema(s).</description>
					<parent ref="EID073b8871-8ce0-4ba8-9b53-f1aec2019d3b"/>
					<testSteps>
						<TestStep id="EID77f090cf-48ef-46f3-901b-6ef2db4a1599">
							<label>IGNORE</label>
							<description>IGNORE</description>
							<parent ref="EID2c6fe882-7c53-47f2-b4c4-66b15c248be4"/>
							<statementForExecution>not applicable</statementForExecution>
							<testItemType ref="EIDf483e8e8-06b9-4900-ab36-adad0d7f22f0"/>
							<testAssertions>
								<TestAssertion id="EID40646a32-7b85-411f-abc7-1eba528d7d95">
									<label>gmlas.b.1: xsi:schemaLocation attribute</label>
									<description><![CDATA[Verify for each XML document that the xsi:schemaLocation attribute is provided in the root element.<br/><br/>
Relevant requirements:
<ul>
<li>TG Requirement 6: Data instance (XML) documents shall validate without error against the provided XML schema.</li></ul>
Source: <a href="http://inspire.ec.europa.eu/id/ats/data/master/schemas/schema-validation" target="_blank">Abstract Test Case 'Schema validation'</a>, <a href="http://inspire.jrc.ec.europa.eu/documents/Data_Specifications/INSPIRE_DataSpecification_Template_v3.0rc3.pdf">INSPIRE Data Specification Template, A.9.5</a>]]></description>
									<parent ref="EID77f090cf-48ef-46f3-901b-6ef2db4a1599"/>
									<expectedResult>NOT_APPLICABLE</expectedResult>
									<expression>
let $filesWithErrors := $db[not(/*/@xsi:schemaLocation)][position() le $limitErrors]
return
(if ($filesWithErrors) then 'FAILED' else 'PASSED',
 local:error-statistics('TR.filesWithErrors', count($filesWithErrors)),
 for $file in $filesWithErrors
    order by local:filename($file)
    let $root := $file/element()
    return
     local:addMessage('TR.noSchemaLocation', map { 'filename': local:filename($root) }))
									</expression>
									<testItemType ref="EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a"/>
									<translationTemplates>
										<translationTemplate ref="TR.noSchemaLocation"/>
										<translationTemplate ref="TR.filesWithErrors"/>
									</translationTemplates>
								</TestAssertion>
								<TestAssertion id="EID0eaac0f2-9ab3-44ab-9f02-4ee0a1587d14">
									<label>gmlas.b.2: validate XML documents</label>
									<description><![CDATA[Validate each document against the schema(s) specified in the xsi:schemaLocation attribute using strict XML schema validation.<br/><br/>
Relevant requirements:
<ul>
<li>IR Requirement Article 3: Common Types. Types that are common to several of the themes listed in Annexes I, II and III to Directive 2007/2/EC shall conform to the definitions and constraints and include the attributes and association roles set out in Annex I.</li>
<li>IR Requirement Article 4 (2): Types for the Exchange and Classification of Spatial Objects. Spatial object types and data types shall comply with the definitions and constraints and include the attributes and association roles set out in the Annexes.</li>
<li>IR Requirement Article 4 (3): Types for the Exchange and Classification of Spatial Objects. The enumerations and code lists used in attributes or association roles of spatial object types or data types shall comply with the definitions and include the values set out in Annex II. The enumeration and code list values are uniquely identified by language-neutral mnemonic codes for computers. The values may also include a language-specific name to be used for human interaction.</li>
<li>IR Requirement Article 5 (2): Types. Types that are a sub-type of another type shall also include all this type‘s attributes and association roles.</li>
<li>IR Requirement Article 5 (3): Types. Abstract types shall not be instantiated.</li>
<li>IR Requirement Article 6 (5): Code Lists and Enumerations. Attributes or association roles of spatial object types or data types that have an enumeration type may only take values from the lists specified for the enumeration type.</li>
<li>IR Requirement Article 9 (1): Identifier Management. The data type Identifier defined in Section 2.1 of Annex I shall be used as a type for the external object identifier of a spatial object.</li>
<li>TG Requirement 1: Spatial object types and data types shall comply with the multiplicities defined for the attributes and association roles in this section.</li>
<li>TG Requirement 6: Data instance (XML) documents shall validate without error against the provided XML schema.</li>
</ul>
Note that validation is done on a file-by-file basis and access to many remote schema files is time consuming. I.e. it will be <em>much</em> faster to validate a single document with many features than many files with a few features each.<br/><br/>
Source: <a href="http://inspire.ec.europa.eu/id/ats/data/master/schemas/schema-validation" target="_blank">Abstract Test Case 'Schema validation'</a>, <a href="http://inspire.jrc.ec.europa.eu/documents/Data_Specifications/INSPIRE_DataSpecification_Template_v3.0rc3.pdf">INSPIRE Data Specification Template, A.1.1, A.1.2, A.1.3, A.1.4, A.1.5, A.3.2, (A.6.1), A.8.1, A.9.5</a>]]></description>
									<parent ref="EID77f090cf-48ef-46f3-901b-6ef2db4a1599"/>
									<expectedResult>NOT_APPLICABLE</expectedResult>
									<expression>
let $errors := (for $file in $db
 return
 try { 
  let $root := $file/element()
  let $logentry := local:log('Validating ' || local:filename($root))
  let $start := prof:current-ms()
  let $query := "declare variable $file external; validate:xsd-info($file)"
  let $messages := xquery:eval($query, map{ 'file': $file }, map{ 'timeout': 60 })
  (:let $messages := validate:xsd-info($file):)
  let $duration := prof:current-ms()-$start
  let $errors := count($messages)
  let $logentry := local:log('Duration: ' || $duration || ' ms. Errors: ' || $errors || '.')
  return
   if ($errors&gt;0) then
    (local:addMessage('TR.invalidSchema', map { 'filename': local:filename($root), 'count': string($errors) }),
     for $message in $messages return local:addMessage('TR.xmlSchemaError', map { 'filename': local:filename($root), 'error': $message }))
   else ()
 } catch * 
 { 
	let $logerror := local:log('Exception: ' || $err:description)
   return local:addMessage('TR.timeoutFileOperation', map { 'filename': local:filename($file/element()), 'description': $err:description })
 }
 )[position() le $limitErrors]						 
return
(if ($errors) then 'FAILED' else 'PASSED',
 local:error-statistics('TR.filesWithErrors', count($errors[@ref eq 'TR.invalidSchema'])),
 $errors[position() le $limitErrors])
									</expression>
									<testItemType ref="EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a"/>
									<translationTemplates>
										<translationTemplate ref="TR.invalidSchema"/>
										<translationTemplate ref="TR.filesWithErrors"/>
									</translationTemplates>
								</TestAssertion>
							</testAssertions>
						</TestStep>
					</testSteps>
				</TestCase>
				<TestCase id="EID18099150-f7ac-4174-a7b6-45121383a5d3">
					<label>GML model</label>
					<description>Verify that the XML documents meet the requirements of the GML model that are not tested by XML schema validation alone.</description>
					<parent ref="EID073b8871-8ce0-4ba8-9b53-f1aec2019d3b"/>
					<testSteps>
						<TestStep id="EIDc04ade3c-0ad2-4fa5-9977-d83022855e3b">
							<label>IGNORE</label>
							<description>IGNORE</description>
							<parent ref="EID18099150-f7ac-4174-a7b6-45121383a5d3"/>
							<statementForExecution>not applicable</statementForExecution>
							<testItemType ref="EIDf483e8e8-06b9-4900-ab36-adad0d7f22f0"/>
							<testAssertions>
								<TestAssertion id="EIDb33aaf9a-898f-4625-b87f-81c07ac09adf">
									<label>gmlas.c.1: Consistency with the GML model</label>
									<description><![CDATA[Inspect each property element and verify that it either carries a URI reference to an object (@xlink:href), contains one or more object elements as child elements or contains a non-empty text node (whitespace is trimmed before checking for empty text).<br/><br/>
Strictly, empty string values are valid according to the GML model, but they are not an appropriate value for any of the string-valued attributes in INSPIRE.<br/><br/>
Relevant requirements:
<ul>
<li>IR Requirement Article 4 (2): Types for the Exchange and Classification of Spatial Objects. Spatial object types and data types shall comply with the definitions and constraints and include the attributes and association roles set out in the Annexes.</li>
<li>IR Requirement Article 4 (3): Types for the Exchange and Classification of Spatial Objects. The enumerations and code lists used in attributes or association roles of spatial object types or data types shall comply with the definitions and include the values set out in Annex II. The enumeration and code list values are uniquely identified by language-neutral mnemonic codes for computers. The values may also include a language-specific name to be used for human interaction.</li>
</ul>
Source: <a href="http://inspire.ec.europa.eu/id/ats/data/master/schemas/gml-model" target="_blank">Abstract Test Case 'GML model'</a>, <a href="http://inspire.jrc.ec.europa.eu/documents/Data_Specifications/INSPIRE_DataSpecification_Template_v3.0rc3.pdf">INSPIRE Data Specification Template, A.1.3, (A.6.1), A.9.5</a>]]></description>
									<parent ref="EIDc04ade3c-0ad2-4fa5-9977-d83022855e3b"/>
									<expectedResult>NOT_APPLICABLE</expectedResult>
									<expression>
let $indeterminatePositionValues := ('unknown', 'now')
let $featuresWithErrors := $features[*[not(@xlink:href or element() or (text() and string-length(normalize-space(text()))&gt;0) or (string-length(@uom)&gt;0) or @xsi:nil eq 'true' or @indeterminatePosition = $indeterminatePositionValues)] or */*/*[not(@xlink:href or element() or (text() and string-length(normalize-space(text()))&gt;0) or (string-length(@uom)&gt;0) or @xsi:nil eq 'true' or @indeterminatePosition = $indeterminatePositionValues)]][position() le $limitErrors]
return
(if ($featuresWithErrors) then 'FAILED' else 'PASSED',
 local:error-statistics('TR.featuresWithErrors', count($featuresWithErrors)),
 for $feature in $featuresWithErrors
   order by $feature/@gml:id
   let $properties := $feature/*[not(@xlink:href or element() or (text() and string-length(normalize-space(text()))&gt;0) or (string-length(@uom)&gt;0) or @xsi:nil eq 'true' or @indeterminatePosition = $indeterminatePositionValues)] | $feature/*/*/*[not(@xlink:href or element() or (text() and string-length(normalize-space(text()))&gt;0) or (string-length(@uom)&gt;0) or @xsi:nil eq 'true' or @indeterminatePosition = $indeterminatePositionValues)]
   return
     local:addMessage('TR.emptyValue', map { 'filename': local:filename($feature), 'featureType': local-name($feature), 'gmlid': string($feature/@gml:id), 'propertyNames': fn:string-join($properties/local-name(),', ') }))
									</expression>
									<testItemType ref="EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a"/>
									<translationTemplates>
										<translationTemplate ref="TR.emptyValue"/>
										<translationTemplate ref="TR.featuresWithErrors"/>
									</translationTemplates>
								</TestAssertion>
								<TestAssertion id="EIDb62f96a5-349f-40dd-b777-1e52ea09b686">
									<label>gmlas.c.2: nilReason attributes require xsi:nil=true</label>
									<description><![CDATA[Inspect each XML element that represents a feature property and that has a nilReason XML attribute. Verify that xsi:nil='true' is present in the property element, i.e. a reason is only provided in properties that are void / nil.<br/><br/>
Limitation: This test currently does not analyse properties of data types or objects embedded in a feature.<br/><br/>
Relevant requirements:
<ul>
<li>IR Requirement Article 4 (2): Types for the Exchange and Classification of Spatial Objects. Spatial object types and data types shall comply with the definitions and constraints and include the attributes and association roles set out in the Annexes.</li>
<li>IR Requirement Article 4 (3): Types for the Exchange and Classification of Spatial Objects. The enumerations and code lists used in attributes or association roles of spatial object types or data types shall comply with the definitions and include the values set out in Annex II. The enumeration and code list values are uniquely identified by language-neutral mnemonic codes for computers. The values may also include a language-specific name to be used for human interaction.</li>
</ul>
Source: <a href="http://inspire.ec.europa.eu/id/ats/data/master/schemas/gml-model" target="_blank">Abstract Test Case 'GML model'</a>, <a href="http://inspire.jrc.ec.europa.eu/documents/Data_Specifications/INSPIRE_DataSpecification_Template_v3.0rc3.pdf">INSPIRE Data Specification Template, A.1.3, (A.6.1), A.9.5</a>]]></description>
									<parent ref="EIDc04ade3c-0ad2-4fa5-9977-d83022855e3b"/>
									<expectedResult>NOT_APPLICABLE</expectedResult>
									<expression>
let $featuresWithErrors := $features[*[@nilReason and not(@xsi:nil eq 'true')]][position() le $limitErrors]
return
(if ($featuresWithErrors) then 'FAILED' else 'PASSED',
 local:error-statistics('TR.featuresWithErrors', count($featuresWithErrors)),
 for $feature in $featuresWithErrors
   order by $feature/@gml:id
   let $properties := $feature/*[@nilReason and not(@xsi:nil eq 'true')]
   return
     local:addMessage('TR.nilMissing', map { 'filename': local:filename($feature), 'featureType': local-name($feature), 'gmlid': string($feature/@gml:id), 'propertyNames': fn:string-join($properties/local-name(),', ') }))
									</expression>
									<testItemType ref="EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a"/>
									<translationTemplates>
										<translationTemplate ref="TR.nilMissing"/>
										<translationTemplate ref="TR.featuresWithErrors"/>
									</translationTemplates>
								</TestAssertion>
								<TestAssertion id="EIDabc9199e-d5a8-4829-80bd-09b7e49e2a76">
									<label>gmlas.c.3: nilReason values</label>
									<description><![CDATA[Inspect all nilReason values and verify that either the values from the INSPIRE registry or the pre-defined values from the GML standard are used. Otherwise report incorrectReason. Valid values are:
<ul>
<li>'http://inspire.ec.europa.eu/codelist/VoidReasonValue/Unknown'</li>
<li>'http://inspire.ec.europa.eu/codelist/VoidReasonValue/Unpopulated'</li>
<li>'http://inspire.ec.europa.eu/codelist/VoidReasonValue/Withheld'</li>
<li>'unknown'</li>
<li>'other:unpopulated'</li>
<li>'withheld'</li>
</ul>
Limitation: This test currently does not analyse properties of data types or objects embedded in a feature.<br/><br/>
Relevant requirements:
<ul>
<li>IR Requirement Article 4 (2): Types for the Exchange and Classification of Spatial Objects. Spatial object types and data types shall comply with the definitions and constraints and include the attributes and association roles set out in the Annexes.</li>
<li>IR Requirement Article 4 (3): Types for the Exchange and Classification of Spatial Objects. The enumerations and code lists used in attributes or association roles of spatial object types or data types shall comply with the definitions and include the values set out in Annex II. The enumeration and code list values are uniquely identified by language-neutral mnemonic codes for computers. The values may also include a language-specific name to be used for human interaction.</li>
</ul>
Source: <a href="http://inspire.ec.europa.eu/id/ats/data/master/schemas/gml-model" target="_blank">Abstract Test Case 'GML model'</a>, <a href="http://inspire.jrc.ec.europa.eu/documents/Data_Specifications/INSPIRE_DataSpecification_Template_v3.0rc3.pdf">INSPIRE Data Specification Template, A.1.3, (A.6.1), A.9.5</a>]]></description>
									<parent ref="EIDc04ade3c-0ad2-4fa5-9977-d83022855e3b"/>
									<expectedResult>NOT_APPLICABLE</expectedResult>
									<expression>
let $values := ( 'http://inspire.ec.europa.eu/codelist/VoidReasonValue/Unknown', 'http://inspire.ec.europa.eu/codelist/VoidReasonValue/Unpopulated', 'http://inspire.ec.europa.eu/codelist/VoidReasonValue/Withheld', 'unknown', 'other:unpopulated', 'withheld' )
let $featuresWithErrors := $features[*[@xsi:nil eq 'true' and @nilReason and not(@nilReason =  $values)]][position() le $limitErrors]
return
(if ($featuresWithErrors) then 'FAILED' else 'PASSED',
 local:error-statistics('TR.featuresWithErrors', count($featuresWithErrors)),
 for $feature in $featuresWithErrors
   order by $feature/@gml:id
   let $properties := $feature/*[@xsi:nil eq 'true' and @nilReason and not(@nilReason =  $values)]
   let $values := distinct-values($properties/@nilReason)
   return
     local:addMessage('TR.incorrectReason', map { 'filename': local:filename($feature), 'featureType': local-name($feature), 'gmlid': string($feature/@gml:id), 'propertyNames': fn:string-join($properties/local-name(),', '), 'values': fn:string-join($values, ', ') }))
									</expression>
									<testItemType ref="EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a"/>
									<translationTemplates>
										<translationTemplate ref="TR.incorrectReason"/>
										<translationTemplate ref="TR.featuresWithErrors"/>
									</translationTemplates>
								</TestAssertion>
							</testAssertions>
						</TestStep>
					</testSteps>
				</TestCase>
				<TestCase id="EID7e0765c8-c149-4cf2-956f-ca4db0e0ed94">
					<label>Simple features</label>
					<description>Verify that all features that are not excluded from the default requirement that geometries meet the requirements of the Simple Features standard fulfill the requirements.</description>
					<parent ref="EID073b8871-8ce0-4ba8-9b53-f1aec2019d3b"/>
					<testSteps>
						<TestStep id="EID73531400-70ac-4374-83fd-5df504d5cfba">
							<label>IGNORE</label>
							<description>IGNORE</description>
							<parent ref="EID7e0765c8-c149-4cf2-956f-ca4db0e0ed94"/>
							<statementForExecution>not applicable</statementForExecution>
							<testItemType ref="EIDf483e8e8-06b9-4900-ab36-adad0d7f22f0"/>
							<testAssertions>
								<TestAssertion id="EIDf625c820-71a1-41e2-afb2-11cdc7d5a01b">
									<label>gmlas.d.1: No spatial topology objects</label>
									<description><![CDATA[Verify that no spatial topology types are used, i.e. check that none of the GML object elements for spatial topology are used as child elements of a feature from the application schema.<br/><br/>
Relevant requirements:
<ul><li>IR Requirement Article 12 (1): Other Requirements and Rules. The value domain of spatial properties defined in this Regulation shall be restricted to the Simple Feature spatial schema as defined in Herring, John R. (ed.), OpenGIS® Implementation Standard for Geographic information – Simple feature access – Part 1: Common architecture, version 1.2.1, Open Geospatial Consortium, 2011, unless specified otherwise for a specific spatial data theme or type.</li></ul>
<b>Note:</b>
<ul>
<li>Cadastral Parcel and Building 3D features are excluded from this requirement.</li>
</ul>
Source: <a href="http://inspire.ec.europa.eu/id/ats/data/master/schemas/simple-features" target="_blank">Abstract Test Case 'Simple features'</a>, <a href="http://inspire.jrc.ec.europa.eu/documents/Data_Specifications/INSPIRE_DataSpecification_Template_v3.0rc3.pdf">INSPIRE Data Specification Template, A.1.7</a>]]></description>
									<parent ref="EID73531400-70ac-4374-83fd-5df504d5cfba"/>
									<expectedResult>NOT_APPLICABLE</expectedResult>
									<expression>
let $featuresToInspect := $features[not(self::cp3:* or self::cp:* or self::bu-core3d3:* or self::bu-core3d:*)]  
let $featuresWithErrors := $featuresToInspect[.//*[self::gml:Node|self::gml:Edge|self::gml:Face|self::gml:TopoSolid|self::gml:TopoPoint|self::gml:TopoCurve|self::gml:TopoSurface|self::gml:TopoVolume|self::gml:TopoComplex]][position() le $limitErrors]
return
(if ($featuresWithErrors) then 'FAILED' else 'PASSED',
 local:error-statistics('TR.featuresWithErrors', count($featuresWithErrors)),
 for $feature in $featuresWithErrors
   order by $feature/@gml:id
   let $element := $feature//*[self::gml:Node|self::gml:Edge|self::gml:Face|self::gml:TopoSolid|self::gml:TopoPoint|self::gml:TopoCurve|self::gml:TopoSurface|self::gml:TopoVolume|self::gml:TopoComplex][1]
   return
     local:addMessage('TR.spatialTopologyTypeFound', map { 'filename': local:filename($feature), 'featureType': local-name($feature), 'gmlid': string($feature/@gml:id), 'elementName': name($element) }))
									</expression>
									<testItemType ref="EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a"/>
									<translationTemplates>
										<translationTemplate ref="TR.spatialTopologyTypeFound"/>
										<translationTemplate ref="TR.featuresWithErrors"/>
									</translationTemplates>
								</TestAssertion>
								<TestAssertion id="EID44cf3e26-809e-49a9-8ec0-750a373e9ff1">
									<label>gmlas.d.2: No non-linear interpolation</label>
									<description><![CDATA[Verify that only linear interpolation is used, i.e. check that none of the nonlinear GML curve segment object elements are used as child elements of a feature from the application schema.<br/><br/>
Relevant requirements:
<ul><li>IR Requirement Article 12 (1): Other Requirements and Rules. The value domain of spatial properties defined in this Regulation shall be restricted to the Simple Feature spatial schema as defined in Herring, John R. (ed.), OpenGIS® Implementation Standard for Geographic information – Simple feature access – Part 1: Common architecture, version 1.2.1, Open Geospatial Consortium, 2011, unless specified otherwise for a specific spatial data theme or type.</li></ul>
<b>Note:</b>
<ul>
<li>Cadastral Parcel and Building 3D features are excluded from this requirement.</li>
</ul>
Source: <a href="http://inspire.ec.europa.eu/id/ats/data/master/schemas/simple-features" target="_blank">Abstract Test Case 'Simple features'</a>, <a href="http://inspire.jrc.ec.europa.eu/documents/Data_Specifications/INSPIRE_DataSpecification_Template_v3.0rc3.pdf">INSPIRE Data Specification Template, A.1.7</a>]]></description>
									<parent ref="EID73531400-70ac-4374-83fd-5df504d5cfba"/>
									<expectedResult>NOT_APPLICABLE</expectedResult>
									<expression>
let $featuresToInspect := $features[not(self::cp3:* or self::cp:* or self::bu-core3d3:* or self::bu-core3d:*)]
let $featuresWithErrors := $featuresToInspect[.//gml:Curve/gml:segments/*[not(self::gml:LineStringSegment)]][position() le $limitErrors]
return
(if ($featuresWithErrors) then 'FAILED' else 'PASSED',
 local:error-statistics('TR.featuresWithErrors', count($featuresWithErrors)),
 for $feature in $featuresWithErrors
   order by $feature/@gml:id
   let $elements := $feature//gml:Curve/gml:segments/*[not(self::gml:LineStringSegment)]
   return
     local:addMessage('TR.invalidInterpolationFound', map { 'filename': local:filename($feature), 'featureType': local-name($feature), 'gmlid': string($feature/@gml:id), 'elementName': name($elements[1]) }))
									</expression>
									<testItemType ref="EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a"/>
									<translationTemplates>
										<translationTemplate ref="TR.invalidInterpolationFound"/>
										<translationTemplate ref="TR.featuresWithErrors"/>
									</translationTemplates>
								</TestAssertion>
								<TestAssertion id="EID3d7ad0b2-c9f5-4910-aa09-b3226b720f7d">
									<label>gmlas.d.3: Surface geometry elements</label>
									<description><![CDATA[Verify that only gml:Polygon or gml:Surface are used, i.e. check that none of the disallowed GML surface object elements are used as child elements of a feature from the application schema.<br/><br/>
Relevant requirements:
<ul><li>IR Requirement Article 12 (1): Other Requirements and Rules. The value domain of spatial properties defined in this Regulation shall be restricted to the Simple Feature spatial schema as defined in Herring, John R. (ed.), OpenGIS® Implementation Standard for Geographic information – Simple feature access – Part 1: Common architecture, version 1.2.1, Open Geospatial Consortium, 2011, unless specified otherwise for a specific spatial data theme or type.</li></ul>
<b>Note:</b>
<ul>
<li>Cadastral Parcel and Building 3D features are excluded from this requirement.</li>
</ul>
Source: <a href="http://inspire.ec.europa.eu/id/ats/data/master/schemas/simple-features" target="_blank">Abstract Test Case 'Simple features'</a>, <a href="http://inspire.jrc.ec.europa.eu/documents/Data_Specifications/INSPIRE_DataSpecification_Template_v3.0rc3.pdf">INSPIRE Data Specification Template, A.1.7</a>]]></description>
									<parent ref="EID73531400-70ac-4374-83fd-5df504d5cfba"/>
									<expectedResult>NOT_APPLICABLE</expectedResult>
									<expression>
let $featuresToInspect := $features[not(self::cp3:* or self::cp:* or self::bu-core3d3:* or self::bu-core3d:*)]
let $featuresWithErrors := $featuresToInspect[.//*[self::gml:OrientableSurface|self::gml:CompositeSurface|self::gml:PolyhedralSurface|self::gml:Tin|self::gml:TriangulatedSurface]][position() le $limitErrors]
return
(if ($featuresWithErrors) then 'FAILED' else 'PASSED',
 local:error-statistics('TR.featuresWithErrors', count($featuresWithErrors)),
 for $feature in $featuresWithErrors
   order by $feature/@gml:id
   let $element := $feature//*[self::gml:OrientableSurface|self::gml:CompositeSurface|self::gml:PolyhedralSurface|self::gml:Tin|self::gml:TriangulatedSurface][1]
   return
     local:addMessage('TR.invalidSurfaceElementFound', map { 'filename': local:filename($feature), 'featureType': local-name($feature), 'gmlid': string($feature/@gml:id), 'elementName': name($element) }))
									</expression>
									<testItemType ref="EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a"/>
									<translationTemplates>
										<translationTemplate ref="TR.invalidSurfaceElementFound"/>
										<translationTemplate ref="TR.featuresWithErrors"/>
									</translationTemplates>
								</TestAssertion>
								<TestAssertion id="EID008b7c4f-b315-4596-b5e9-4a29910eb43f">
									<label>gmlas.d.4: No non-planar interpolation</label>
									<description><![CDATA[Verify that only planar interpolation is used, i.e. check that only PolygonPatch is used as a GML surface patch object elements in features from the application schema.<br/><br/>
Relevant requirements:
<ul><li>IR Requirement Article 12 (1): Other Requirements and Rules. The value domain of spatial properties defined in this Regulation shall be restricted to the Simple Feature spatial schema as defined in Herring, John R. (ed.), OpenGIS® Implementation Standard for Geographic information – Simple feature access – Part 1: Common architecture, version 1.2.1, Open Geospatial Consortium, 2011, unless specified otherwise for a specific spatial data theme or type.</li></ul>
<b>Note:</b>
<ul>
<li>Cadastral Parcel and Building 3D features are excluded from this requirement.</li>
</ul>
Source: <a href="http://inspire.ec.europa.eu/id/ats/data/master/schemas/simple-features" target="_blank">Abstract Test Case 'Simple features'</a>, <a href="http://inspire.jrc.ec.europa.eu/documents/Data_Specifications/INSPIRE_DataSpecification_Template_v3.0rc3.pdf">INSPIRE Data Specification Template, A.1.7</a>]]></description>
									<parent ref="EID73531400-70ac-4374-83fd-5df504d5cfba"/>
									<expectedResult>NOT_APPLICABLE</expectedResult>
									<expression>
let $featuresToInspect := $features[not(self::cp3:* or self::cp:* or self::bu-core3d3:* or self::bu-core3d:*)]
let $featuresWithErrors := $featuresToInspect[.//gml:Surface/gml:patches/*[not(self::gml:PolygonPatch)]][position() le $limitErrors]
return
(if ($featuresWithErrors) then 'FAILED' else 'PASSED',
 local:error-statistics('TR.featuresWithErrors', count($featuresWithErrors)),
 for $feature in $featuresWithErrors
   order by $feature/@gml:id
   let $element := $feature//gml:Surface/gml:patches/*[not(self::gml:PolygonPatch)][1]
   return
     local:addMessage('TR.invalidSurfacePatchElementFound', map { 'filename': local:filename($feature), 'featureType': local-name($feature), 'gmlid': string($feature/@gml:id), 'elementName': name($element) }))
									</expression>
									<testItemType ref="EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a"/>
									<translationTemplates>
										<translationTemplate ref="TR.invalidSurfacePatchElementFound"/>
										<translationTemplate ref="TR.featuresWithErrors"/>
									</translationTemplates>
								</TestAssertion>
								<TestAssertion id="EID4f2f9722-897a-4bad-b11e-d4e119b6690d">
									<label>gmlas.d.5: Geometry elements</label>
									<description><![CDATA[Verify that only valid GML geometry elements are used, i.e. check that none of the disallowed GML geometry object elements are used as child elements of a feature from the application schema.<br/><br/>
Relevant requirements:
<ul><li>IR Requirement Article 12 (1): Other Requirements and Rules. The value domain of spatial properties defined in this Regulation shall be restricted to the Simple Feature spatial schema as defined in Herring, John R. (ed.), OpenGIS® Implementation Standard for Geographic information – Simple feature access – Part 1: Common architecture, version 1.2.1, Open Geospatial Consortium, 2011, unless specified otherwise for a specific spatial data theme or type.</li></ul>
<b>Note:</b>
<ul>
<li>Cadastral Parcel and Building 3D features are excluded from this requirement.</li>
</ul>
Source: <a href="http://inspire.ec.europa.eu/id/ats/data/master/schemas/simple-features" target="_blank">Abstract Test Case 'Simple features'</a>, <a href="http://inspire.jrc.ec.europa.eu/documents/Data_Specifications/INSPIRE_DataSpecification_Template_v3.0rc3.pdf">INSPIRE Data Specification Template, A.1.7</a>]]></description>
									<parent ref="EID73531400-70ac-4374-83fd-5df504d5cfba"/>
									<expectedResult>NOT_APPLICABLE</expectedResult>
									<expression>
let $featuresToInspect := $features[not(self::cp3:* or self::cp:* or self::bu-core3d3:* or self::bu-core3d:*)]
let $featuresWithErrors := $featuresToInspect[.//*[self::gml:Solid|self::gml:MultiSolid|self::gml:CompositeSolid|self::gml:CompositeCurve|self::gml:Grid]][position() le $limitErrors]
return
(if ($featuresWithErrors) then 'FAILED' else 'PASSED',
 local:error-statistics('TR.featuresWithErrors', count($featuresWithErrors)),
 for $feature in $featuresWithErrors
   order by $feature/@gml:id
   let $element := $feature//*[self::gml:Solid|self::gml:MultiSolid|self::gml:CompositeSolid|self::gml:CompositeCurve|self::gml:Grid][1]
   return
     local:addMessage('TR.invalidGeometryElementFound', map { 'filename': local:filename($feature), 'featureType': local-name($feature), 'gmlid': string($feature/@gml:id), 'elementName': name($element) }))
									</expression>
									<testItemType ref="EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a"/>
									<translationTemplates>
										<translationTemplate ref="TR.invalidGeometryElementFound"/>
										<translationTemplate ref="TR.featuresWithErrors"/>
									</translationTemplates>
								</TestAssertion>
								<TestAssertion id="EIDbc49770c-4eab-4330-8462-af0664ae0b80">
									<label>gmlas.d.6: Point coordinates in gml:pos</label>
									<description><![CDATA[Verify that in points only gml:pos is used for coordinates.<br/><br/>
Relevant requirements:
<ul><li>IR Requirement Article 12 (1): Other Requirements and Rules. The value domain of spatial properties defined in this Regulation shall be restricted to the Simple Feature spatial schema as defined in Herring, John R. (ed.), OpenGIS® Implementation Standard for Geographic information – Simple feature access – Part 1: Common architecture, version 1.2.1, Open Geospatial Consortium, 2011, unless specified otherwise for a specific spatial data theme or type.</li></ul>
<b>Note:</b>
<ul>
<li>Cadastral Parcel and Building 3D features are excluded from this requirement.</li>
</ul>
Source: <a href="http://inspire.ec.europa.eu/id/ats/data/master/schemas/simple-features" target="_blank">Abstract Test Case 'Simple features'</a>, <a href="http://inspire.jrc.ec.europa.eu/documents/Data_Specifications/INSPIRE_DataSpecification_Template_v3.0rc3.pdf">INSPIRE Data Specification Template, A.1.7</a>]]></description>
									<parent ref="EID73531400-70ac-4374-83fd-5df504d5cfba"/>
									<expectedResult>NOT_APPLICABLE</expectedResult>
									<expression>
let $featuresToInspect := $features[not(self::cp3:* or self::cp:* or self::bu-core3d3:* or self::bu-core3d:*)]
let $featuresWithErrors := $featuresToInspect[.//gml:Point/*[not(self::gml:pos)]][position() le $limitErrors]
return
(if ($featuresWithErrors) then 'FAILED' else 'PASSED',
 local:error-statistics('TR.featuresWithErrors', count($featuresWithErrors)),
 for $feature in $featuresWithErrors
   order by $feature/@gml:id
   let $element := $feature//gml:Point/*[not(self::gml:pos)][1]
   return
     local:addMessage('TR.invalidPositionElementFound', map { 'filename': local:filename($feature), 'featureType': local-name($feature), 'gmlid': string($feature/@gml:id), 'elementName': name($element), 'geometryType': 'point', 'posElementName': 'gml:pos' }))
									</expression>
									<testItemType ref="EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a"/>
									<translationTemplates>
										<translationTemplate ref="TR.invalidPositionElementFound"/>
										<translationTemplate ref="TR.featuresWithErrors"/>
									</translationTemplates>
								</TestAssertion>
								<TestAssertion id="EID894c6a96-4fb2-4921-ad98-1d2a52985887">
									<label>gmlas.d.7: Curve/Surface coordinates in gml:posList</label>
									<description><![CDATA[Verify that in curves and surfaces only gml:posList is used for coordinates.<br/><br/>
Relevant requirements:
<ul><li>IR Requirement Article 12 (1): Other Requirements and Rules. The value domain of spatial properties defined in this Regulation shall be restricted to the Simple Feature spatial schema as defined in Herring, John R. (ed.), OpenGIS® Implementation Standard for Geographic information – Simple feature access – Part 1: Common architecture, version 1.2.1, Open Geospatial Consortium, 2011, unless specified otherwise for a specific spatial data theme or type.</li></ul>
<b>Note:</b>
<ul>
<li>Cadastral Parcel and Building 3D features are excluded from this requirement.</li>
</ul>
Source: <a href="http://inspire.ec.europa.eu/id/ats/data/master/schemas/simple-features" target="_blank">Abstract Test Case 'Simple features'</a>, <a href="http://inspire.jrc.ec.europa.eu/documents/Data_Specifications/INSPIRE_DataSpecification_Template_v3.0rc3.pdf">INSPIRE Data Specification Template, A.1.7</a>]]></description>
									<parent ref="EID73531400-70ac-4374-83fd-5df504d5cfba"/>
									<expectedResult>NOT_APPLICABLE</expectedResult>
									<expression>
let $featuresToInspect := $features[not(self::cp3:* or self::cp:* or self::bu-core3d3:* or self::bu-core3d:*)]
let $featuresWithErrors := $featuresToInspect[.//*[self::gml:LineString|self::gml:LineStringSegment|self::gml:LinearRing]/*[not(self::gml:posList)]][position() le $limitErrors]
return
(if ($featuresWithErrors) then 'FAILED' else 'PASSED',
 local:error-statistics('TR.featuresWithErrors', count($featuresWithErrors)),
 for $feature in $featuresWithErrors
   order by $feature/@gml:id
   let $element := ($feature//*[self::gml:LineString|self::gml:LineStringSegment|self::gml:LinearRing|self::gml:Arc|self::gml:Circle]/*[not(self::gml:posList)])[1]
   return
     local:addMessage('TR.invalidPositionElementFound', map { 'filename': local:filename($feature), 'featureType': local-name($feature), 'gmlid': string($feature/@gml:id), 'elementName': name($element), 'geometryType': 'curve/surface', 'posElementName': 'gml:posList' }))
									</expression>
									<testItemType ref="EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a"/>
									<translationTemplates>
										<translationTemplate ref="TR.invalidPositionElementFound"/>
										<translationTemplate ref="TR.featuresWithErrors"/>
									</translationTemplates>
								</TestAssertion>
								<TestAssertion id="EID160e4f83-e9c3-45c5-b684-20027f8f191a">
									<label>gmlas.d.8: No array property elements</label>
									<description><![CDATA[Verify that geometry aggregates do not use the GML array property elements, i.e. check that the only the regular property elements are used, but not the array property elements. For example, for a gml:MultiPoint, only gml:pointMember may be used, not gml:pointMembers.<br/><br/>
Relevant requirements:
<ul><li>IR Requirement Article 12 (1): Other Requirements and Rules. The value domain of spatial properties defined in this Regulation shall be restricted to the Simple Feature spatial schema as defined in Herring, John R. (ed.), OpenGIS® Implementation Standard for Geographic information – Simple feature access – Part 1: Common architecture, version 1.2.1, Open Geospatial Consortium, 2011, unless specified otherwise for a specific spatial data theme or type.</li></ul>
<b>Note:</b>
<ul>
<li>Cadastral Parcel and Building 3D features are excluded from this requirement.</li>
</ul>
Source: <a href="http://inspire.ec.europa.eu/id/ats/data/master/schemas/simple-features" target="_blank">Abstract Test Case 'Simple features'</a>, <a href="http://inspire.jrc.ec.europa.eu/documents/Data_Specifications/INSPIRE_DataSpecification_Template_v3.0rc3.pdf">INSPIRE Data Specification Template, A.1.7</a>]]></description>
									<parent ref="EID73531400-70ac-4374-83fd-5df504d5cfba"/>
									<expectedResult>NOT_APPLICABLE</expectedResult>
									<expression>
let $featuresToInspect := $features[not(self::cp3:* or self::cp:* or self::bu-core3d3:* or self::bu-core3d:*)]
let $featuresWithErrors := $featuresToInspect[.//*[self::gml:MultiPoint/gml:pointMembers|self::gml:MultiCurve/gml:curveMembers|self::gml:MultiSurface/gml:surfaceMembers|self::gml:MultiGeometry/gml:geometryMembers]][position() le $limitErrors]
return
(if ($featuresWithErrors) then 'FAILED' else 'PASSED',
 local:error-statistics('TR.featuresWithErrors', count($featuresWithErrors)),
 for $feature in $featuresWithErrors
   order by $feature/@gml:id
   let $element := ($feature//*[self::gml:MultiPoint|self::gml:MultiCurve|self::gml:MultiSurface|self::gml:MultiGeometry]/*[self::gml:pointMembers|self::gml:curveMembers|self::gml:surfaceMembers|self::gml:geometryMembers])[1]
   return
     local:addMessage('TR.arrayElementFound', map { 'filename': local:filename($feature), 'featureType': local-name($feature), 'gmlid': string($feature/@gml:id), 'elementName': name($element) }))
									</expression>
									<testItemType ref="EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a"/>
									<translationTemplates>
										<translationTemplate ref="TR.arrayElementFound"/>
										<translationTemplate ref="TR.featuresWithErrors"/>
									</translationTemplates>
								</TestAssertion>
								<TestAssertion id="EIDf9e92525-152a-41fa-9990-42691f39b1ce">
									<label>gmlas.d.9: 1, 2 or 3 coordinate dimensions</label>
									<description><![CDATA[Coordinate reference systems may have 1, 2 or 3 dimensions, i.e. check all occurances of srsDimension and for values greater than '3'.<br/><br/>
Relevant requirements:
<ul><li>IR Requirement Article 12 (1): Other Requirements and Rules. The value domain of spatial properties defined in this Regulation shall be restricted to the Simple Feature spatial schema as defined in Herring, John R. (ed.), OpenGIS® Implementation Standard for Geographic information – Simple feature access – Part 1: Common architecture, version 1.2.1, Open Geospatial Consortium, 2011, unless specified otherwise for a specific spatial data theme or type.</li></ul>
<b>Note:</b>
<ul>
<li>Cadastral Parcel and Building 3D features are excluded from this requirement.</li>
</ul>
Source: <a href="http://inspire.ec.europa.eu/id/ats/data/master/schemas/simple-features" target="_blank">Abstract Test Case 'Simple features'</a>, <a href="http://inspire.jrc.ec.europa.eu/documents/Data_Specifications/INSPIRE_DataSpecification_Template_v3.0rc3.pdf">INSPIRE Data Specification Template, A.1.7</a>]]></description>
									<parent ref="EID73531400-70ac-4374-83fd-5df504d5cfba"/>
									<expectedResult>NOT_APPLICABLE</expectedResult>
									<expression>
let $featuresToInspect := $features[not(self::cp3:* or self::cp:* or self::bu-core3d3:* or self::bu-core3d:*)]
let $featuresWithErrors := $featuresToInspect[.//@srsDimension &gt; 3][position() le $limitErrors]
return
(if ($featuresWithErrors) then 'FAILED' else 'PASSED',
 local:error-statistics('TR.featuresWithErrors', count($featuresWithErrors)),
 for $feature in $featuresWithErrors
   order by $feature/@gml:id
   let $dimension := $feature//@srsDimension[. &gt; 3][1]
   return
     local:addMessage('TR.tooManyDimensions', map { 'filename': local:filename($feature), 'featureType': local-name($feature), 'gmlid': string($feature/@gml:id), 'dimension': string($dimension) }))
									</expression>
									<testItemType ref="EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a"/>
									<translationTemplates>
										<translationTemplate ref="TR.tooManyDimensions"/>
										<translationTemplate ref="TR.featuresWithErrors"/>
									</translationTemplates>
								</TestAssertion>
								<TestAssertion id="EID79aec969-3ca0-4190-a6e9-8b49682f414a">
									<label>gmlas.d.10: Validate geometries (1)</label>
									<description><![CDATA[Verify that in curves and surfaces only gml:posList is used for coordinates, i.e. validate all geometry elements of a feature from the application schema using a geometry library.<br/><br/>
Relevant requirements:
<ul><li>IR Requirement Article 12 (1): Other Requirements and Rules. The value domain of spatial properties defined in this Regulation shall be restricted to the Simple Feature spatial schema as defined in Herring, John R. (ed.), OpenGIS® Implementation Standard for Geographic information – Simple feature access – Part 1: Common architecture, version 1.2.1, Open Geospatial Consortium, 2011, unless specified otherwise for a specific spatial data theme or type.</li></ul>
<b>Note:</b>
<ul>
<li>Cadastral Parcel and Building 3D features are excluded from this requirement.</li>
</ul>
Source: <a href="http://inspire.ec.europa.eu/id/ats/data/master/schemas/simple-features" target="_blank">Abstract Test Case 'Simple features'</a>, <a href="http://inspire.jrc.ec.europa.eu/documents/Data_Specifications/INSPIRE_DataSpecification_Template_v3.0rc3.pdf">INSPIRE Data Specification Template, A.1.7</a>]]></description>
									<parent ref="EID73531400-70ac-4374-83fd-5df504d5cfba"/>
									<expectedResult>NOT_APPLICABLE</expectedResult>
									<expression>
let $featuresToInspect := $features[not(self::cp3:* or self::cp:* or self::bu-core3d3:* or self::bu-core3d:*)]
let $messages := for $feature in $featuresToInspect
  return
	try {
		let $vr := ggeo:validateAndReport($feature,'110')
		return
	   if (xs:boolean($vr/ggeo:isValid)) then ()
	   else
	   	for $message in $vr/ggeo:message[@type='ERROR']
			return
				local:addMessage('TR.invalidGeometry', map { 'filename': local:filename($feature), 'featureType': local-name($feature), 'gmlid': string($feature/@gml:id), 'text': $message/text() })
	} catch * { 
		let $dummy := local:log('Processing feature ' || string($feature/@gml:id) || '. Exception: ' || $err:code || ' - ' || $err:description || ' [' || $err:module || ', line: ' || $err:line-number || ', column: ' || $err:column-number || ']')
		return () (: silently record the exception in the log, but do not raise errors in the test report as parsing exceptions are already reported in assertion gmlas.d.11 :)
	}
return
(if ($messages) then 'FAILED' else 'PASSED',
 local:error-statistics('TR.featuresWithErrors', count(fn:distinct-values($messages//etf:argument[@token='gmlid']/text()))),
 $messages)
									</expression>
									<testItemType ref="EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a"/>
									<translationTemplates>
										<translationTemplate ref="TR.invalidGeometry"/>
										<translationTemplate ref="TR.featuresWithErrors"/>
									</translationTemplates>
								</TestAssertion>
								<TestAssertion id="EID9aeba9b2-4b29-46bd-9bf7-7999eea9a173">
									<label>gmlas.d.11: Validate geometries (2)</label>
									<description><![CDATA[Report any errors found while parsing GML geometries.<br/><br/>
Relevant requirements:
<ul><li>IR Requirement Article 12 (1): Other Requirements and Rules. The value domain of spatial properties defined in this Regulation shall be restricted to the Simple Feature spatial schema as defined in Herring, John R. (ed.), OpenGIS® Implementation Standard for Geographic information – Simple feature access – Part 1: Common architecture, version 1.2.1, Open Geospatial Consortium, 2011, unless specified otherwise for a specific spatial data theme or type.</li></ul>
Source: <a href="http://inspire.ec.europa.eu/id/ats/data/master/schemas/simple-features" target="_blank">Abstract Test Case 'Simple features'</a>, <a href="http://inspire.jrc.ec.europa.eu/documents/Data_Specifications/INSPIRE_DataSpecification_Template_v3.0rc3.pdf">INSPIRE Data Specification Template, A.1.7</a>]]></description>
									<parent ref="EID73531400-70ac-4374-83fd-5df504d5cfba"/>
									<expectedResult>NOT_APPLICABLE</expectedResult>
									<expression>
if (map:size($geometryParsingErrors)=0) then 'PASSED' else
('FAILED',
 local:error-statistics('TR.featuresWithErrors', map:size($geometryParsingErrors)),
 for $key in map:keys($geometryParsingErrors)[position() le $limitErrors]
 return local:addMessage('TR.invalidGmlGeometry', map { 'filename': local:filename($features[@gml:id=$key]), 'featureType': local-name($features[@gml:id=$key]), 'gmlid': $key, 'description': map:get($geometryParsingErrors, $key) }))
									</expression>
									<testItemType ref="EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a"/>
									<translationTemplates>
										<translationTemplate ref="TR.invalidGmlGeometry"/>
										<translationTemplate ref="TR.featuresWithErrors"/>
									</translationTemplates>
								</TestAssertion>
							</testAssertions>
						</TestStep>
					</testSteps>
				</TestCase>
				<TestCase id="EID2bb450fc-b68f-468e-85b6-56ee9741b731">
					<label>Code list values in basic data types</label>
					<description>Verify whether all attributes whose value type is a code list take the values set out therein. This is usually part of the tests of the corresponding application schema. However, for data types that are used across the INSPIRE application schemas, this is best done in this test suite to avoid duplicating the same test in many test suites. The relevant data types for the Annex I data themes with code list values are: GeographicalName.</description>
					<parent ref="EID073b8871-8ce0-4ba8-9b53-f1aec2019d3b"/>
					<testSteps>
						<TestStep id="EID9a4ba802-3d2b-4d07-8aef-caa0df54cb62">
							<label>IGNORE</label>
							<description>IGNORE</description>
							<parent ref="EID2bb450fc-b68f-468e-85b6-56ee9741b731"/>
							<statementForExecution>not applicable</statementForExecution>
							<testItemType ref="EIDf483e8e8-06b9-4900-ab36-adad0d7f22f0"/>
							<testAssertions>
								<TestAssertion id="EID12abc9dc-27ff-406f-8cdd-f55db5523c97">
									<label>gmlas.e.1: GrammaticalNumber attributes</label>
									<description><![CDATA[When an attribute has a code list as its type, verify that the values comply with the definitions and include the values set out in Annex II of the regulation. For this attribute, the allowed values are specified in code list <a href='http://inspire.ec.europa.eu/codelist/GrammaticalNumberValue'>http://inspire.ec.europa.eu/codelist/GrammaticalNumberValue</a>.<br/>For datasets using version 3 of the GML application schema, the value is the last path element of the code list value URI and it is in the child text node. For datasets using version 4 of the GML application schema, the value is in the xlink:href XML attribute and is the HTTP URI of the code list value.<br/><br/>
Relevant requirements:
<ul>
<li>IR Requirement Article 4 (1): Types for the Exchange and Classification of Spatial Objects.  For the exchange and classification of spatial objects from data sets meeting the conditions laid down in Article 4 of Directive 2007/2/EC, Member States shall use the spatial object types and associated data types, enumerations and code lists that are defined in Annexes II, III and IV for the themes the data sets relate to.</li>
<li>IR Requirement Article 4 (3): Types for the Exchange and Classification of Spatial Objects. The enumerations and code lists used in attributes or association roles of spatial object types or data types shall comply with the definitions and include the values set out in Annex II. The enumeration and code list values are uniquely identified by language-neutral mnemonic codes for computers. The values may also include a language-specific name to be used for human interaction.</li>
<li>IR Requirement Article 6 (1): Code Lists and Enumerations. Codelists shall be of one of the following types, as specified in the Annexes:
<ol>
<li>code lists whose allowed values comprise only the values specified in this Regulation;</li>
<li>code lists whose allowed values comprise the values specified in this Regulation and
narrower values defined by data providers;</li>
<li>code lists whose allowed values comprise the values specified in this Regulation and
additional values at any level defined by data providers;</li>
<li>code lists, whose allowed values comprise any values defined by data providers.</li>
</ol>
For the purposes of points 2, 3 and 4, in addition to the allowed values, data providers may use the values specified in the relevant INSPIRE Technical Guidance document available on the INSPIRE web site of the Joint Research Centre.</li>
<li>IR Requirement Article 6 (2): Code Lists and Enumerations. Code lists may be hierarchical. Values of hierarchical code lists may have a more generic parent value. Where the valid values of a hierarchical code list are specified in a table in this Regulation, the parent values are listed in the last column.</li>
<li>IR Requirement Article 6 (3): Code Lists and Enumerations. Where, for an attribute whose type is a code list as referred to in points 2, 3 or 4 of paragraph 1, a data provider provides a value that is not specified in this Regulation, that value and its definition shall be made available in a register.</li>
<li>IR Requirement Article 6 (4): Code Lists and Enumerations. Attributes or association roles of spatial object types or data types whose type is a code list may only take values that are allowed according to the specification of the code list.</li>
</ul>
Source: <a href="http://inspire.ec.europa.eu/id/ats/data/master/schemas/code-list-values" target="_blank">Abstract Test Case 'Code list values'</a>, <a href="http://inspire.ec.europa.eu/documents/Data_Specifications/INSPIRE_DataSpecification_GN_v3.1.pdf">INSPIRE Data Specification on Geographical Names, A.1.3</a>]]></description>
									<parent ref="EID9a4ba802-3d2b-4d07-8aef-caa0df54cb62"/>
									<expectedResult>NOT_APPLICABLE</expectedResult>
									<expression>
let $objects3 := $features/*/gn3:GeographicalName
let $objects4 := $features/*/gn:GeographicalName
let $messages := local:check-code-list-values($objects3, $objects4, 'grammaticalNumber', 'http://inspire.ec.europa.eu/codelist/GrammaticalNumberValue', 1)
return (if ($messages) then 'FAILED' else 'PASSED', $messages)
									</expression>
									<testItemType ref="EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a"/>
									<translationTemplates>
										<translationTemplate ref="TR.disallowedCodeListValue"/>
										<translationTemplate ref="TR.featuresWithErrors"/>
									</translationTemplates>
								</TestAssertion>
								<TestAssertion id="EID74abd92b-9225-4d73-a03f-db7bd3471bd6">
									<label>gmlas.e.2: GrammaticalGender attributes</label>
									<description><![CDATA[When an attribute has a code list as its type, verify that the values comply with the definitions and include the values set out in Annex II of the regulation. For this attribute, the allowed values are specified in code list <a href='http://inspire.ec.europa.eu/codelist/GrammaticalGenderValue'>http://inspire.ec.europa.eu/codelist/GrammaticalGenderValue</a>.<br/>For datasets using version 3 of the GML application schema, the value is the last path element of the code list value URI and it is in the child text node. For datasets using version 4 of the GML application schema, the value is in the xlink:href XML attribute and is the HTTP URI of the code list value.<br/><br/>
Relevant requirements:
<ul>
<li>IR Requirement Article 4 (1): Types for the Exchange and Classification of Spatial Objects.  For the exchange and classification of spatial objects from data sets meeting the conditions laid down in Article 4 of Directive 2007/2/EC, Member States shall use the spatial object types and associated data types, enumerations and code lists that are defined in Annexes II, III and IV for the themes the data sets relate to.</li>
<li>IR Requirement Article 4 (3): Types for the Exchange and Classification of Spatial Objects. The enumerations and code lists used in attributes or association roles of spatial object types or data types shall comply with the definitions and include the values set out in Annex II. The enumeration and code list values are uniquely identified by language-neutral mnemonic codes for computers. The values may also include a language-specific name to be used for human interaction.</li>
<li>IR Requirement Article 6 (1): Code Lists and Enumerations. Codelists shall be of one of the following types, as specified in the Annexes:
<ol>
<li>code lists whose allowed values comprise only the values specified in this Regulation;</li>
<li>code lists whose allowed values comprise the values specified in this Regulation and
narrower values defined by data providers;</li>
<li>code lists whose allowed values comprise the values specified in this Regulation and
additional values at any level defined by data providers;</li>
<li>code lists, whose allowed values comprise any values defined by data providers.</li>
</ol>
For the purposes of points 2, 3 and 4, in addition to the allowed values, data providers may use the values specified in the relevant INSPIRE Technical Guidance document available on the INSPIRE web site of the Joint Research Centre.</li>
<li>IR Requirement Article 6 (2): Code Lists and Enumerations. Code lists may be hierarchical. Values of hierarchical code lists may have a more generic parent value. Where the valid values of a hierarchical code list are specified in a table in this Regulation, the parent values are listed in the last column.</li>
<li>IR Requirement Article 6 (3): Code Lists and Enumerations. Where, for an attribute whose type is a code list as referred to in points 2, 3 or 4 of paragraph 1, a data provider provides a value that is not specified in this Regulation, that value and its definition shall be made available in a register.</li>
<li>IR Requirement Article 6 (4): Code Lists and Enumerations. Attributes or association roles of spatial object types or data types whose type is a code list may only take values that are allowed according to the specification of the code list.</li>
</ul>
Source: <a href="http://inspire.ec.europa.eu/id/ats/data/master/schemas/code-list-values" target="_blank">Abstract Test Case 'Code list values'</a>, <a href="http://inspire.ec.europa.eu/documents/Data_Specifications/INSPIRE_DataSpecification_GN_v3.1.pdf">INSPIRE Data Specification on Geographical Names, A.1.3</a>]]></description>
									<parent ref="EID9a4ba802-3d2b-4d07-8aef-caa0df54cb62"/>
									<expectedResult>NOT_APPLICABLE</expectedResult>
									<expression>
let $objects3 := $features/*/gn3:GeographicalName
let $objects4 := $features/*/gn:GeographicalName
let $messages := local:check-code-list-values($objects3, $objects4, 'grammaticalGender', 'http://inspire.ec.europa.eu/codelist/GrammaticalGenderValue', 1)
return (if ($messages) then 'FAILED' else 'PASSED', $messages)
									</expression>
									<testItemType ref="EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a"/>
									<translationTemplates>
										<translationTemplate ref="TR.disallowedCodeListValue"/>
										<translationTemplate ref="TR.featuresWithErrors"/>
									</translationTemplates>
								</TestAssertion>
								<TestAssertion id="EIDa81c147e-72b2-4054-9d3d-26b1091b641f">
									<label>gmlas.e.3: NameStatus attributes</label>
									<description><![CDATA[When an attribute has a code list as its type, verify that the values comply with the definitions and include the values set out in Annex II of the regulation. For this attribute, the allowed values are specified in code list <a href='http://inspire.ec.europa.eu/codelist/NameStatusValue'>http://inspire.ec.europa.eu/codelist/NameStatusValue</a>.<br/>For datasets using version 3 of the GML application schema, the value is the last path element of the code list value URI and it is in the child text node. For datasets using version 4 of the GML application schema, the value is in the xlink:href XML attribute and is the HTTP URI of the code list value.<br/><br/>
Relevant requirements:
<ul>
<li>IR Requirement Article 4 (1): Types for the Exchange and Classification of Spatial Objects.  For the exchange and classification of spatial objects from data sets meeting the conditions laid down in Article 4 of Directive 2007/2/EC, Member States shall use the spatial object types and associated data types, enumerations and code lists that are defined in Annexes II, III and IV for the themes the data sets relate to.</li>
<li>IR Requirement Article 4 (3): Types for the Exchange and Classification of Spatial Objects. The enumerations and code lists used in attributes or association roles of spatial object types or data types shall comply with the definitions and include the values set out in Annex II. The enumeration and code list values are uniquely identified by language-neutral mnemonic codes for computers. The values may also include a language-specific name to be used for human interaction.</li>
<li>IR Requirement Article 6 (1): Code Lists and Enumerations. Codelists shall be of one of the following types, as specified in the Annexes:
<ol>
<li>code lists whose allowed values comprise only the values specified in this Regulation;</li>
<li>code lists whose allowed values comprise the values specified in this Regulation and
narrower values defined by data providers;</li>
<li>code lists whose allowed values comprise the values specified in this Regulation and
additional values at any level defined by data providers;</li>
<li>code lists, whose allowed values comprise any values defined by data providers.</li>
</ol>
For the purposes of points 2, 3 and 4, in addition to the allowed values, data providers may use the values specified in the relevant INSPIRE Technical Guidance document available on the INSPIRE web site of the Joint Research Centre.</li>
<li>IR Requirement Article 6 (2): Code Lists and Enumerations. Code lists may be hierarchical. Values of hierarchical code lists may have a more generic parent value. Where the valid values of a hierarchical code list are specified in a table in this Regulation, the parent values are listed in the last column.</li>
<li>IR Requirement Article 6 (3): Code Lists and Enumerations. Where, for an attribute whose type is a code list as referred to in points 2, 3 or 4 of paragraph 1, a data provider provides a value that is not specified in this Regulation, that value and its definition shall be made available in a register.</li>
<li>IR Requirement Article 6 (4): Code Lists and Enumerations. Attributes or association roles of spatial object types or data types whose type is a code list may only take values that are allowed according to the specification of the code list.</li>
</ul>
Source: <a href="http://inspire.ec.europa.eu/id/ats/data/master/schemas/code-list-values" target="_blank">Abstract Test Case 'Code list values'</a>, <a href="http://inspire.ec.europa.eu/documents/Data_Specifications/INSPIRE_DataSpecification_GN_v3.1.pdf">INSPIRE Data Specification on Geographical Names, A.1.3</a>]]></description>
									<parent ref="EID9a4ba802-3d2b-4d07-8aef-caa0df54cb62"/>
									<expectedResult>NOT_APPLICABLE</expectedResult>
									<expression>
let $objects3 := $features/*/gn3:GeographicalName
let $objects4 := $features/*/gn:GeographicalName
let $messages := local:check-code-list-values($objects3, $objects4, 'nameStatus', 'http://inspire.ec.europa.eu/codelist/NameStatusValue', 1)
return (if ($messages) then 'FAILED' else 'PASSED', $messages)
									</expression>
									<testItemType ref="EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a"/>
									<translationTemplates>
										<translationTemplate ref="TR.disallowedCodeListValue"/>
										<translationTemplate ref="TR.featuresWithErrors"/>
									</translationTemplates>
								</TestAssertion>
								<TestAssertion id="EID5f5466b9-1f77-4577-aef8-2fdee94f7ad2">
									<label>gmlas.e.4: Nativeness attributes</label>
									<description><![CDATA[When an attribute has a code list as its type, verify that the values comply with the definitions and include the values set out in Annex II of the regulation. For this attribute, the allowed values are specified in code list <a href='http://inspire.ec.europa.eu/codelist/NativenessValue'>http://inspire.ec.europa.eu/codelist/NativenessValue</a>.<br/>For datasets using version 3 of the GML application schema, the value is the last path element of the code list value URI and it is in the child text node. For datasets using version 4 of the GML application schema, the value is in the xlink:href XML attribute and is the HTTP URI of the code list value.<br/><br/>
Relevant requirements:
<ul>
<li>IR Requirement Article 4 (1): Types for the Exchange and Classification of Spatial Objects.  For the exchange and classification of spatial objects from data sets meeting the conditions laid down in Article 4 of Directive 2007/2/EC, Member States shall use the spatial object types and associated data types, enumerations and code lists that are defined in Annexes II, III and IV for the themes the data sets relate to.</li>
<li>IR Requirement Article 4 (3): Types for the Exchange and Classification of Spatial Objects. The enumerations and code lists used in attributes or association roles of spatial object types or data types shall comply with the definitions and include the values set out in Annex II. The enumeration and code list values are uniquely identified by language-neutral mnemonic codes for computers. The values may also include a language-specific name to be used for human interaction.</li>
<li>IR Requirement Article 6 (1): Code Lists and Enumerations. Codelists shall be of one of the following types, as specified in the Annexes:
<ol>
<li>code lists whose allowed values comprise only the values specified in this Regulation;</li>
<li>code lists whose allowed values comprise the values specified in this Regulation and
narrower values defined by data providers;</li>
<li>code lists whose allowed values comprise the values specified in this Regulation and
additional values at any level defined by data providers;</li>
<li>code lists, whose allowed values comprise any values defined by data providers.</li>
</ol>
For the purposes of points 2, 3 and 4, in addition to the allowed values, data providers may use the values specified in the relevant INSPIRE Technical Guidance document available on the INSPIRE web site of the Joint Research Centre.</li>
<li>IR Requirement Article 6 (2): Code Lists and Enumerations. Code lists may be hierarchical. Values of hierarchical code lists may have a more generic parent value. Where the valid values of a hierarchical code list are specified in a table in this Regulation, the parent values are listed in the last column.</li>
<li>IR Requirement Article 6 (3): Code Lists and Enumerations. Where, for an attribute whose type is a code list as referred to in points 2, 3 or 4 of paragraph 1, a data provider provides a value that is not specified in this Regulation, that value and its definition shall be made available in a register.</li>
<li>IR Requirement Article 6 (4): Code Lists and Enumerations. Attributes or association roles of spatial object types or data types whose type is a code list may only take values that are allowed according to the specification of the code list.</li>
</ul>
Source: <a href="http://inspire.ec.europa.eu/id/ats/data/master/schemas/code-list-values" target="_blank">Abstract Test Case 'Code list values'</a>, <a href="http://inspire.ec.europa.eu/documents/Data_Specifications/INSPIRE_DataSpecification_GN_v3.1.pdf">INSPIRE Data Specification on Geographical Names, A.1.3</a>]]></description>
									<parent ref="EID9a4ba802-3d2b-4d07-8aef-caa0df54cb62"/>
									<expectedResult>NOT_APPLICABLE</expectedResult>
									<expression>
let $objects3 := $features/*/gn3:GeographicalName
let $objects4 := $features/*/gn:GeographicalName
let $messages := local:check-code-list-values($objects3, $objects4, 'nativeness', 'http://inspire.ec.europa.eu/codelist/NativenessValue', 1)
return (if ($messages) then 'FAILED' else 'PASSED', $messages)
									</expression>
									<testItemType ref="EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a"/>
									<translationTemplates>
										<translationTemplate ref="TR.disallowedCodeListValue"/>
										<translationTemplate ref="TR.featuresWithErrors"/>
									</translationTemplates>
								</TestAssertion>
							</testAssertions>
						</TestStep>
					</testSteps>
				</TestCase>
				<TestCase id="EID72dd801d-cd5f-409b-b07a-f161106c5ec2">
					<label>Constraints</label>
					<description>Verify that the features provided in the dataset adhere to the constraints specified in the INSPIRE application schema. This is usually part of the tests of the corresponding application schema. However, for data types that are used across the INSPIRE application schemas, this is best done in this test suite to avoid duplicating the same test in many test suites. The relevant data types for the Annex I data themes with constraints are: GeographicalName.</description>
					<parent ref="EID073b8871-8ce0-4ba8-9b53-f1aec2019d3b"/>
					<testSteps>
						<TestStep id="EID81c7e523-72fc-4981-9d59-5b20cef911f6">
							<label>IGNORE</label>
							<description>IGNORE</description>
							<parent ref="EID72dd801d-cd5f-409b-b07a-f161106c5ec2"/>
							<statementForExecution>not applicable</statementForExecution>
							<testItemType ref="EIDf483e8e8-06b9-4900-ab36-adad0d7f22f0"/>
							<testAssertions>
								<TestAssertion id="EID719af9fc-ad3d-4c89-85ed-6507712f634a">
									<label>gmlas.f.1: At least one of the two attributes pronunciationSoundLink and pronunciationIPA shall not be void</label>
									<description><![CDATA[At least one of the two attributes pronunciationSoundLink and pronunciationIPA shall not be void<br/><br/>
OCL: "inv: self.pronounciationIPA -> notEmpty() or self.pronounciationSoundLink -> notEmpty()"<br/><br/>
Verify that for all features either or both pronunciationSoundLink or pronunciationIPA is not void.<br/><br/>
Relevant requirements:
<ul>
<li>IR Requirement Article 4 (2): Types for the Exchange and Classification of Spatial Objects. Spatial object types and data types shall comply with the definitions and constraints and include the attributes and association roles set out in the Annexes.</li>
</ul>
Source: <a href="http://inspire.ec.europa.eu/id/ats/data-gn/master/gn-as/constraints" target="_blank">Abstract Test Case 'Constraints'</a>, <a href="http://inspire.ec.europa.eu/documents/Data_Specifications/INSPIRE_DataSpecification_GN_v3.1.pdf">INSPIRE Data Specification on Geographical Names, A.1.6</a>]]></description>
									<parent ref="EID81c7e523-72fc-4981-9d59-5b20cef911f6"/>
									<expectedResult>NOT_APPLICABLE</expectedResult>
									<expression>
let $featuresWithErrors := $features[*/*:GeographicalName/*:pronunciation[not(@xsi:nil='true') and not(*/*:pronunciationSoundLink[not(@xsi:nil='true')] or */*:pronunciationIPA[not(@xsi:nil='true')])]][position() le $limitErrors]
return
(if ($featuresWithErrors) then 'FAILED' else 'PASSED',
 local:error-statistics('TR.featuresWithErrors', count($featuresWithErrors)),
 for $feature in $featuresWithErrors
   order by $feature/@gml:id
   return
     local:addMessage('TR.constraintViolation', map { 'filename': local:filename($feature), 'featureType': local-name($feature), 'gmlid': string($feature/@gml:id), 'constraint': 'At least one of the two attributes pronunciationSoundLink and pronunciationIPA shall not be void, if the pronunciation property is provided.', 'additionalInfo' : '' }))
									</expression>
									<testItemType ref="EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a"/>
									<translationTemplates>
										<translationTemplate ref="TR.constraintViolation"/>
										<translationTemplate ref="TR.featuresWithErrors"/>
									</translationTemplates>
								</TestAssertion>
							</testAssertions>
						</TestStep>
					</testSteps>
				</TestCase>
			</testCases>
		</TestModule>
	</testModules>
</ExecutableTestSuite>
