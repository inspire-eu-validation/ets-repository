<?xml version="1.0" encoding="UTF-8"?>
<con:soapui-project id="eec9d674-d94b-4d8d-b744-1309c6cae1d2" activeEnvironment="Default" name="Conformance Class: View Service - WMS" resourceRoot="${projectDir}" soapui-version="5.4.0" abortOnError="false" runType="SEQUENTIAL" xmlns:con="http://eviware.com/soapui/config">
	<con:description>
		<![CDATA[This test suite examines a WMS View Service against the requirements of the INSPIRE Profile of ISO 19128 into the Technical Guidance for the implementation of INSPIRE View Services 3.11.
<br/> <br/>]]>
	</con:description>
	<con:settings>
		<con:setting id="com.eviware.soapui.impl.wsdl.actions.iface.tools.soapui.TestRunnerAction@values-local">
			<![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Report Format(s)" value=""/>
  <con:entry key="Host:Port" value=""/>
  <con:entry key="Export JUnit Results" value="false"/>
  <con:entry key="Export All" value="false"/>
  <con:entry key="Save After" value="false"/>
  <con:entry key="Add Settings" value="false"/>
  <con:entry key="WSS Password Type" value=""/>
  <con:entry key="TestSuite" value="GetCapabilities_Operation"/>
  <con:entry key="Endpoint" value=""/>
  <con:entry key="Select Report Type" value=""/>
  <con:entry key="System Properties" value=""/>
  <con:entry key="Password" value=""/>
  <con:entry key="Print Report" value="false"/>
  <con:entry key="Open Report" value="false"/>
  <con:entry key="Export JUnit Results with test properties" value="false"/>
  <con:entry key="Global Properties" value=""/>
  <con:entry key="Project Properties" value=""/>
  <con:entry key="Project Password" value=""/>
  <con:entry key="TestCase" value="at11-getcapabilities-resource-type-is-service"/>
  <con:entry key="Username" value=""/>
  <con:entry key="user-settings.xml Password" value=""/>
  <con:entry key="TestRunner Path" value=""/>
  <con:entry key="Environment" value="Default"/>
  <con:entry key="Coverage Report" value="false"/>
  <con:entry key="Enable UI" value="false"/>
  <con:entry key="Root Folder" value=""/>
  <con:entry key="Ignore Errors" value="false"/>
  <con:entry key="Domain" value=""/>
  <con:entry key="Tool Args" value=""/>
  <con:entry key="Save Project" value="false"/>
</xml-fragment>]]>
		</con:setting>
	</con:settings>
	<con:testSuite id="a5986848-3e54-4648-b8d4-09ada35a460f" name="GetCapabilities_Operation">
		<con:settings />
		<con:runType>SEQUENTIAL</con:runType>
		<con:testCase id="f7184e7c-7a86-4cf5-8b19-1f4431cc81f5" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="initial-testcase" searchProperties="true">
			<con:settings />
			<con:testStep type="groovy" name="reset-properties" id="f3e7710e-de55-4d55-9279-801c70e7554b">
				<con:settings />
				<con:config>
					<script>import de.interactive_instruments.xtf.*;
SOAPUI_I.init(log,context,testRunner);

// Also update credentials
TestSetup.init();

testRunner.testCase.testSuite.project.setPropertyValue( 'extended_capabilities_scenario', '' );
testRunner.testCase.testSuite.project.setPropertyValue( 'lastServiceEndpoint', '');

					</script>
				</con:config>
			</con:testStep>
			<con:testStep type="httprequest" name="http-request" id="57d85050-3859-433d-a242-15b9c47e35d5">
				<con:settings />
				<con:config method="GET" xsi:type="con:HttpRequest" id="e3a4c9b4-ff53-4b3a-a62d-908b2de3aa7f" name="http-request" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<con:settings>
						<con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
					</con:settings>
					<con:endpoint>${#Project#serviceEndpoint}</con:endpoint>
					<con:request />
					<con:assertion type="Valid HTTP Status Codes" id="a3a3f4d9-6cec-439c-87dd-fc3d74d56270" name="Valid HTTP Status Codes">
						<con:configuration>
							<codes>200</codes>
						</con:configuration>
					</con:assertion>
					<con:assertion type="OwsExceptionReportAssertion" id="fdda2347-adad-4635-af5f-5b9e49bc0567" name="Fail if service returns OWS Exception Report" />
					<con:assertion type="Response SLA Assertion" id="0352da2a-abdd-488a-a66d-211b62371836" name="Response SLA">
						<con:configuration>
							<SLA>30000</SLA>
						</con:configuration>
					</con:assertion>
					<con:credentials>
						<con:authType>No Authorization</con:authType>
					</con:credentials>
					<con:jmsConfig JMSDeliveryMode="PERSISTENT" />
					<con:jmsPropertyConfig />
					<con:parameters>
						<con:parameter>
							<con:name>request</con:name>
							<con:value>GetCapabilities</con:value>
							<con:style>QUERY</con:style>
							<con:default>GetCapabilities</con:default>
							<con:path xsi:nil="true" />
							<con:description xsi:nil="true" />
						</con:parameter>
						<con:parameter>
							<con:name>service</con:name>
							<con:value>${#Project#service}</con:value>
							<con:style>QUERY</con:style>
							<con:default>${#Project#service}</con:default>
							<con:path xsi:nil="true" />
							<con:description xsi:nil="true" />
						</con:parameter>
						<con:parameter>
							<con:name>version</con:name>
							<con:value>${#Project#version}</con:value>
							<con:style>QUERY</con:style>
							<con:default>${#Project#version}</con:default>
							<con:path xsi:nil="true" />
							<con:description xsi:nil="true" />
						</con:parameter>
					</con:parameters>
				</con:config>
			</con:testStep>
			<con:testStep type="groovy" name="set-extended-capabilities-scenario" id="e968301b-09cb-40f5-a278-e0c8a7adf202">
				<con:settings />
				<con:config>
					<script>def response = context.expand('${http-request#Response}');
def capabilities = new XmlSlurper().parseText(response);
def scenario = '2';
if(capabilities.Capability.ExtendedCapabilities.MetadataUrl.size() != 0){
	scenario = '1';
}
testRunner.testCase.testSuite.project.setPropertyValue( "extended_capabilities_scenario", scenario );
log.info('Extended Capabilities Scenario: ' + scenario);</script>
				</con:config>
			</con:testStep>
			<con:testStep type="groovy" name="set-lastserviceendpoint" id="b34c2e7e-3d7d-401e-8a5e-f1a7d7e1ad6f">
				<con:settings />
				<con:config>
					<script>def lastServiceEndpoint = context.expand('${http-request#EndPoint}');
testRunner.testCase.testSuite.project.setPropertyValue( 'lastServiceEndpoint', lastServiceEndpoint);</script>
				</con:config>
			</con:testStep>
			<con:testStep type="httprequest" name="http-request-layer-harmonised-names" id="df044432-b759-4ce3-829b-f82c830b056f">
				<con:settings />
				<con:config method="GET" xsi:type="con:HttpRequest" id="8c4fb121-c42b-458b-94f0-7e538585bf99" name="http-request-layer-harmonised-names" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<con:settings>
						<con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
					</con:settings>
					<con:endpoint>http://inspire.ec.europa.eu/layer/layer.en.xml</con:endpoint>
					<con:request />
					<con:assertion type="Valid HTTP Status Codes" id="b6c9b346-a247-4fbe-9a4a-b3ebdae4c5f5" name="Valid HTTP Status Codes">
						<con:configuration>
							<codes>200</codes>
						</con:configuration>
					</con:assertion>
					<con:assertion type="Response SLA Assertion" id="47c7fb18-1139-4c95-aedf-3162af6847d1" name="Response SLA">
						<con:configuration>
							<SLA>30000</SLA>
						</con:configuration>
					</con:assertion>
					<con:credentials>
						<con:authType>No Authorization</con:authType>
					</con:credentials>
					<con:jmsConfig JMSDeliveryMode="PERSISTENT" />
					<con:jmsPropertyConfig />
					<con:parameters />
				</con:config>
			</con:testStep>
			<con:properties />
		</con:testCase>
		<con:testCase id="452f3b7c-9db1-47c7-9621-6f76b761feea" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="check-initial-testcase" searchProperties="true">
			<con:settings />
			<con:testStep type="groovy" name="run-initial-testcase-if-needed" id="bb0e3025-748d-436e-8910-7b4db9452988">
				<con:settings />
				<con:config>
					<script>def tc = testRunner.testCase.testSuite.project.testSuites["GetCapabilities_Operation"].testCases["initial-testcase"];
def serviceEndPoint = testRunner.testCase.testSuite.project.getPropertyValue( 'serviceEndpoint');
def lastServiceEndPoint = testRunner.testCase.testSuite.project.getPropertyValue( 'lastServiceEndpoint');
def makeInitialRequest = false;
if (tc.getTestStepByName("http-request").getPropertyValue("Response") == null){
	makeInitialRequest = true;
}
else if(serviceEndPoint != lastServiceEndPoint){
	makeInitialRequest = true;
}
if(makeInitialRequest){
	runner = tc.run(new com.eviware.soapui.support.types.StringToObjectMap(), false);
}</script>
				</con:config>
			</con:testStep>
			<con:properties />
		</con:testCase>
		<con:properties />
	</con:testSuite>
	<con:properties>
		<con:property>
			<con:name>serviceEndpoint</con:name>
			<con:value />
		</con:property>
		<con:property>
			<con:name>service</con:name>
			<con:value>WMS</con:value>
		</con:property>
		<con:property>
			<con:name>version</con:name>
			<con:value>1.3.0</con:value>
		</con:property>
		<con:property>
			<con:name>extended_capabilities_scenario</con:name>
			<con:value />
		</con:property>
		<con:property>
			<con:name>lastServiceEndpoint</con:name>
			<con:value />
		</con:property>
		<con:property>
			<con:name>authUser</con:name>
			<con:value />
		</con:property>
		<con:property>
			<con:name>authPwd</con:name>
			<con:value />
		</con:property>
		<con:property>
			<con:name>authMethod</con:name>
			<con:value>basic</con:value>
		</con:property>
		<con:property>
			<con:name>etf.ignore.properties</con:name>
			<con:value>service, version, extended_capabilities_scenario, lastServiceEndpoint, authUser, authPwd</con:value>
		</con:property>
		<con:property>
			<con:name>etf.tag.ids</con:name>
			<con:value>EID7c15a770-986a-4aa0-b4cd-7facbca96a1d</con:value>
		</con:property>
		<con:property>
			<con:name>etf.translation.template.collection.id</con:name>
			<con:value>EIDfa68eb83-a25a-4009-84dd-036de4539c93</con:value>
		</con:property>
		<con:property>
			<con:name>etf.supported.test.object.type.ids</con:name>
			<con:value>EID9981e87e-d642-43b3-ad5f-e77469075e74</con:value>
		</con:property>
		<con:property>
			<con:name>etf.author</con:name>
			<con:value>Consortium Bilbomatica, Guadaltel &amp; Geograma</con:value>
		</con:property>
		<con:property>
			<con:name>etf.creation.date</con:name>
			<con:value>2018-11-07T00:00:00</con:value>
		</con:property>
		<con:property>
			<con:name>etf.last.editor</con:name>
			<con:value>Consortium Bilbomatica, Guadaltel &amp; Geograma</con:value>
		</con:property>
		<con:property>
			<con:name>etf.last.update.date</con:name>
			<con:value>2021-10-07T13:50:00</con:value>
		</con:property>
		<con:property>
			<con:name>etf.version</con:name>
			<con:value>1.0.12</con:value>
		</con:property>
		<con:property>
			<con:name>etf.reference</con:name>
			<con:value>https://github.com/inspire-eu-validation/ets-repository/tree/master/service/vs-wms-soapui-project.xml</con:value>
		</con:property>
		<con:property>
			<con:name>testIntensive</con:name>
			<con:value />
		</con:property>
	</con:properties>
	<con:wssContainer />
	<con:oAuth2ProfileContainer />
	<con:oAuth1ProfileContainer />
	<con:sensitiveInformation />
</con:soapui-project>
